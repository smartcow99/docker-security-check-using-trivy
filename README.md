# Docker-security-check-using-Trivy

![image](https://github.com/user-attachments/assets/d73ba76b-c9f5-416d-9683-ada643f1339d)

> ##### [Trivy](https://trivy.dev/) is a comprehensive and versatile security scanner. 
> ##### νΈλ¦¬λΉ„λ” ν¬κ΄„μ μ΄κ³  λ‹¤μ¬λ‹¤λ¥ν• λ³΄μ• μ¤μΊλ„μ…λ‹λ‹¤.  

<br>

**νΈλ¦¬λΉ„μ νƒ€κ²π€**:

 - Container Image
 - Filesystem
 - Git Repository (remote)
 - Virtual Machine Image
 - Kubernetes
 - AWS

**νΈλ¦¬λΉ„κ°€ μ°Ύμ„ μ μλ” λ¬Έμ μ λ“¤β—**:

 - OS packages and software dependencies in use (SBOM)
 - Known vulnerabilities (CVEs)
 - IaC issues and misconfigurations
 - Sensitive information and secrets
 - Software licenses


## μ‹¤μµ
> ##### Docker Container Imageλ¥Ό λ€μƒμΌλ΅ μ·¨μ•½μ  κ²€μ‚¬

#### 1. 
```bash
> docker run aquasec/trivy
```

> Main.java
```java
public class Main{
        public static void main(String [] args) {
                System.out.println("Image Build by DockerFile!");
        }
}
```

> Dockerfile
```bash
FROM openjdk:17
COPY . /usr/src/myapp
WORKDIR /usr/src/myapp
RUN javac Main.java
CMD ["java", "Main"]
```

```bash
> docker build -t trivytest
```

```bash
> docker run --rm -v /var/run/docker.sock:/var/run/docker.sock aquasec/trivy image --severity HIGH,CRITICAL trivytest
```

| λΌμ΄λΈλ¬λ¦¬  | μ·¨μ•½μ   | μ‹¬κ°λ„ | λ¬Έμ  μ„¤λ…  | ν•΄κ²° λ°©λ²•  | μ„¤μΉλ λ²„μ „  | μμ •λ λ²„μ „  |
|-------------|---------|--------|------------|------------|--------------|--------------|
| expat       | CVE-2022-40674 | HIGH | `xmlparse.c`μ `doContent` ν•¨μμ—μ„ λ°μƒν•λ” Use-after-free μ·¨μ•½μ . μ΄λ΅ μΈν•΄ λ©”λ¨λ¦¬ μ†μƒμ΄ λ°μƒν•  μ μμΌλ©°, μ μ¬μ μΌλ΅ μ•…μ©λ  κ°€λ¥μ„±μ΄ μμ. | μµμ‹  λ²„μ „μΌλ΅ μ—…λ°μ΄νΈν•μ—¬ ν•΄λ‹Ή μ·¨μ•½μ μ„ μμ •ν•¨. | 2.2.5-4.0.1.el8_5.3 | 2.2.5-8.0.1.el8_6.3 |
| glibc       | CVE-2023-4527  | HIGH | `getaddrinfo` ν•¨μμ—μ„ `no-aaaa` λ¨λ“λ΅ μΈν•΄ λ°μƒν•λ” μ¤νƒ μ½κΈ° μ¤λ²„ν”λ΅μ°. μλ»λ DNS μ‘λ‹µμΌλ΅ μΈν•΄ μ‹μ¤ν…μ— μ†μƒμ„ μ¤„ μ μμ. | ν•΄λ‹Ή λ¬Έμ λ¥Ό ν•΄κ²°ν• ν¨μΉ λ²„μ „μΌλ΅ μ—…λ°μ΄νΈ. | 2.28-164.0.5.el8_5.3 | 2.28-225.0.4.el8_8.6 |
| glibc       | CVE-2023-4806  | MEDIUM | `getaddrinfo()` ν•¨μμ—μ„ λ°μƒν•λ” Use-after-free μ·¨μ•½μ . λ©”λ¨λ¦¬ μ†μƒμΌλ΅ μΈν•΄ μ•…μ„± μ½”λ“ μ‹¤ν–‰μ μ„ν—μ΄ μμ. | ν•΄λ‹Ή λ¬Έμ λ¥Ό ν•΄κ²°ν• λ²„μ „μΌλ΅ μ—…λ°μ΄νΈ. | 2.28-164.0.5.el8_5.3 | 2.28-225.0.4.el8_8.6 |
| glibc       | CVE-2023-4813  | MEDIUM | `gaih_inet()` ν•¨μμ—μ„ λ°μƒν•λ” Use-after-free μ·¨μ•½μ . μ‹μ¤ν…μ΄ λΉ„μ •μƒμ μΌλ΅ μΆ…λ£λ  μ μλ” λ¬Έμ λ¥Ό μ λ°ν•¨. | μ—…λ°μ΄νΈλ ν¨μΉ μ μ©. | 2.28-164.0.5.el8_5.3 | 2.28-225.0.4.el8_8.6 |
| glibc       | CVE-2023-4911  | HIGH | `ld.so`μ—μ„ λ²„νΌ μ¤λ²„ν”λ΅μ°κ°€ λ°μƒν•μ—¬ κ¶ν• μƒμΉμ μ„ν—μ΄ μμ. | λ²„νΌ μ¤λ²„ν”λ΅μ° λ¬Έμ λ¥Ό ν•΄κ²°ν• λ²„μ „μΌλ΅ μ—…λ°μ΄νΈ. | 2.28-164.0.5.el8_5.3 | 2.28-225.0.4.el8_8.6 |
| glibc       | CVE-2024-2961  | HIGH | `iconv`μ—μ„ λ°μƒν•λ” Out-of-bounds μ“°κΈ° μ·¨μ•½μ . μ΄λ΅ μΈν•΄ μ›κ²© μ½”λ“ μ‹¤ν–‰μ΄ λ°μƒν•  μ μμ. | ν•΄λ‹Ή μ·¨μ•½μ μ„ ν•΄κ²°ν• μµμ‹  λ²„μ „μΌλ΅ μ—…λ°μ΄νΈ. | 2.28-164.0.5.el8_5.3 | 2.28-251.0.2.el8_10.1 |
| glibc       | CVE-2024-33599 | HIGH | `netgroup` μΊμ‹μ—μ„ μ¤νƒ κΈ°λ° λ²„νΌ μ¤λ²„ν”λ΅μ°κ°€ λ°μƒν•μ—¬ μ‹μ¤ν…μ΄ λΉ„μ •μƒμ μΌλ΅ λ™μ‘ν•  μ μμ. | ν¨μΉλ λ²„μ „μΌλ΅ μ—…λ°μ΄νΈ ν•„μ”. | 2.28-164.0.5.el8_5.3 | 2.28-251.0.2.el8_10.2 |
| glibc       | CVE-2024-33600 | MEDIUM | `netgroup` μΊμ‹ μ‹¤ν¨ μ‹ null ν¬μΈν„° μ—­μ°Έμ΅°λ΅ μΈν•΄ μ‹μ¤ν…μ΄ λΉ„μ •μƒ μΆ…λ£λ  μ μμ. | ν•΄λ‹Ή λ¬Έμ λ¥Ό ν•΄κ²°ν• ν¨μΉ μ μ©. | 2.28-164.0.5.el8_5.3 | 2.28-251.0.2.el8_10.2 |
| glibc       | CVE-2024-33601 | MEDIUM | `netgroup` μΊμ‹μ λ©”λ¨λ¦¬ ν• λ‹Ή μ‹¤ν¨ μ‹ λ°λ¬μ΄ μΆ…λ£λ  μ μμ. | ν¨μΉλ λ²„μ „μΌλ΅ μ—…λ°μ΄νΈ. | 2.28-164.0.5.el8_5.3 | 2.28-251.0.2.el8_10.2 |
| glibc       | CVE-2024-33602 | LOW | `NSS` μ½λ°±μ΄ λ²„νΌ λ‚΄ λ¬Έμμ—΄μ„ μ‚¬μ©ν•  κ²ƒμ΄λΌκ³  κ°€μ •ν•μ—¬ λ°μƒν•λ” λ¬Έμ . | μµμ‹  λ²„μ „μΌλ΅ μ—…λ°μ΄νΈν•μ—¬ λ¬Έμ  ν•΄κ²°. | 2.28-164.0.5.el8_5.3 | 2.28-251.0.2.el8_10.2 |
| glibc-minimal-langpack| CVE-2023-4527  | μ¤‘κ°„   | `getaddrinfo`μ no-aaaa λ¨λ“μ—μ„ μ¤νƒ μ½κΈ° μ¤λ²„ν”λ΅μ° λ°μƒ                                      | μµμ‹  glibc ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                   | 2.28-225.0.4.el8_8.6    | 2.28-251.0.2.el8_10.1  |
| glibc-minimal-langpack| CVE-2023-4806  | μ¤‘κ°„   | `getaddrinfo()`μ—μ„ μ μ¬μ μΈ use-after-free μ·¨μ•½μ                                               | μµμ‹  glibc ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                   | 2.28-225.0.4.el8_8.6    | 2.28-251.0.2.el8_10.1  |
| glibc-minimal-langpack| CVE-2023-4813  | μ¤‘κ°„   | `gaih_inet()`μ—μ„ μ μ¬μ μΈ use-after-free μ·¨μ•½μ                                                 | μµμ‹  glibc ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                   | 2.28-225.0.4.el8_8.6    | 2.28-251.0.2.el8_10.1  |
| glibc-minimal-langpack| CVE-2023-4911  | λ†’μ   | `ld.so`μ—μ„μ λ²„νΌ μ¤λ²„ν”λ΅μ°λ΅ μΈν• κ¶ν• μƒμΉ λ¬Έμ  λ°μƒ                                        | μµμ‹  glibc ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                   | 2.28-225.0.4.el8_8.6    | 2.28-251.0.2.el8_10.1  |
| glibc-minimal-langpack| CVE-2024-2961  | λ†’μ   | `iconv`μ—μ„μ κ²½κ³„ λ°– μ“°κΈ°λ΅ μΈν•΄ μ›κ²© μ½”λ“ μ‹¤ν–‰ κ°€λ¥μ„± λ°μƒ                                   | μµμ‹  glibc ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                   | 2.28-225.0.4.el8_8.6    | 2.28-251.0.2.el8_10.1  |
| krb5-libs             | CVE-2022-42898 | μ¤‘κ°„   | `PAC` κµ¬λ¬Έ λ¶„μ„μ—μ„ μ •μ μ¤λ²„ν”λ΅μ° μ·¨μ•½μ μΌλ΅ μΈν• λ³΄μ• λ¬Έμ                                   | μµμ‹  krb5 ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                    | 1.18.2-14.0.1.el8       | 1.18.2-22.0.1.el8_7    |
| libgcc                | CVE-2022-40982 | μ¤‘κ°„   | μΈν…” `Gather Data Sampling`(GDS) μ‚¬μ΄λ“ μ±„λ„ μ·¨μ•½μ                                              | μµμ‹  libgcc ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                   | 8.5.0-4.0.2.el8_5       | 8.5.0-18.0.5.el8       |
| libgcrypt             | CVE-2021-40528 | λ†’μ   | `ElGamal` κµ¬ν„μ—μ„ ν‰λ¬Έ λ³µκµ¬ κ°€λ¥μ„± λ¬Έμ  λ°μƒ                                                   | μµμ‹  libgcrypt ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                               | 1.8.5-6.el8             | 1.8.5-7.el8_6_fips     |
| libksba               | CVE-2022-3515  | λ†’μ   | μ •μ μ¤λ²„ν”λ΅μ°λ΅ μΈν•΄ μ›κ²© μ½”λ“ μ‹¤ν–‰ κ°€λ¥μ„± λ°μƒ                                               | μµμ‹  libksba ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                 | 1.3.5-7.el8             | 1.3.5-8.el8_6          |
| libnghttp2            | CVE-2023-44487 | μ¤‘κ°„   | μ—¬λ¬ HTTP/2 μ§€μ› μ›Ή μ„λ²„κ°€ DDoS κ³µκ²©μ— μ·¨μ•½ν•¨                                                   | μµμ‹  libnghttp2 ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                              | 1.33.0-3.el8_2.1        | 1.33.0-5.el8_8         |
| openssl-libs          | CVE-2022-4304  | μ¤‘κ°„   | RSA λ³µνΈν™” κµ¬ν„μ—μ„μ νƒ€μ΄λ° κ³µκ²© λ¬Έμ  λ°μƒ                                                     | μµμ‹  openssl ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                 | 1.1.1k-6.el8_5          | 1.1.1k-9.el8_7         |
| systemd-libs          | CVE-2022-2526  | μ¤‘κ°„   | `DnsStream` μ²λ¦¬ μ‹ λ°μƒν•λ” use-after-free μ·¨μ•½μ  λ°μƒ                                         | μµμ‹  systemd-libs ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                            | 239-51.0.1.el8_5.5      | 239-58.0.1.el8_6.4     |
| xz-libs               | CVE-2022-1271  | μ¤‘κ°„   | gzipμ—μ„ μ„μ νμΌ μ“°κΈ° μ·¨μ•½μ  λ°μƒ                                                             | μµμ‹  xz-libs ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                 | 5.2.4-3.el8             | 5.2.4-4.el8_6          |
| zlib                  | CVE-2018-25032 | μ¤‘κ°„   | `zlib`μ—μ„ νΉμ • μ…λ ¥μ„ μ••μ¶•ν•  λ• λ°μƒν•λ” λ³΄μ• λ¬Έμ                                               | μµμ‹  zlib ν¨ν‚¤μ§€λ΅ μ—…λ°μ΄νΈ                                    | 1.2.11-17.el8           | 1.2.11-18.el8_5        |


